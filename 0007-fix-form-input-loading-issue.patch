From 150dd73c6d075b3e28d72cef91f6f65fc98bd8b6 Mon Sep 17 00:00:00 2001
From: jeroendedauw <jeroendedauw@gmail.com>
Date: Wed, 9 May 2012 20:16:53 +0200
Subject: [PATCH 07/14] fix form input loading issue

Change-Id: Ib88a421b3659b098bb3b04cc2d1f9906581fdfaf
---
 includes/services/GoogleMaps3/SM_GoogleMaps3.php   |   11 ++++++++---
 .../GoogleMaps3/SM_GoogleMaps3FormInput.php        |    2 +-
 .../services/GoogleMaps3/jquery.googlemapsinput.js |    2 +-
 3 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/includes/services/GoogleMaps3/SM_GoogleMaps3.php b/includes/services/GoogleMaps3/SM_GoogleMaps3.php
index 03ad418..38a5ffe 100644
--- a/includes/services/GoogleMaps3/SM_GoogleMaps3.php
+++ b/includes/services/GoogleMaps3/SM_GoogleMaps3.php
@@ -30,14 +30,19 @@ $moduleTemplate = array(
 );
 
 $wgResourceModules['ext.sm.fi.googlemaps3'] = $moduleTemplate + array(
-	'dependencies' => array( 'ext.maps.googlemaps3', 'ext.sm.forminputs' ),
+	'dependencies' => array(
+		'ext.sm.fi.googlemaps3.single',
+	),
 	'scripts' => array(
-		'ext.sm.googlemapsinput.js'
+		'ext.sm.googlemapsinput.js',
 	),
 );
 
 $wgResourceModules['ext.sm.fi.googlemaps3.single'] = $moduleTemplate + array(
-	'dependencies' => array( 'ext.sm.fi.googlemaps3' ),
+	'dependencies' => array(
+		'ext.maps.googlemaps3',
+		'ext.sm.forminputs',
+	),
 	'scripts' => array(
 		'jquery.googlemapsinput.js',
 	),
diff --git a/includes/services/GoogleMaps3/SM_GoogleMaps3FormInput.php b/includes/services/GoogleMaps3/SM_GoogleMaps3FormInput.php
index 6326d42..902414d 100644
--- a/includes/services/GoogleMaps3/SM_GoogleMaps3FormInput.php
+++ b/includes/services/GoogleMaps3/SM_GoogleMaps3FormInput.php
@@ -20,7 +20,7 @@ class SMGoogleMaps3FormInput extends SMFormInput {
 	 * @return array of string
 	 */
 	protected function getResourceModules() {
-		return array_merge( parent::getResourceModules(), array( 'ext.sm.fi.googlemaps3.single' ) );
+		return array_merge( parent::getResourceModules(), array( 'ext.sm.fi.googlemaps3' ) );
 	}	
 	
 }
diff --git a/includes/services/GoogleMaps3/jquery.googlemapsinput.js b/includes/services/GoogleMaps3/jquery.googlemapsinput.js
index 48de44e..6add4b0 100644
--- a/includes/services/GoogleMaps3/jquery.googlemapsinput.js
+++ b/includes/services/GoogleMaps3/jquery.googlemapsinput.js
@@ -8,7 +8,7 @@
  * @licence GNU GPL v3
  * @author Jeroen De Dauw <jeroendedauw at gmail dot com>
  */
-
+debugger;
 (function( $ ){ $.fn.googlemapsinput = function( mapDivId, options ) {
 
 	var self = this;
-- 
1.7.9.5

